<?xml version="1.0"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    Xcom
 * @package     Xcom_Core
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
-->
<config>
    <modules>
        <Xcom_Chronicle>
            <version>0.0.2</version>
        </Xcom_Chronicle>
    </modules>
    <global>
        <models>
            <xcom_chronicle>
                <class>Xcom_Chronicle_Model</class>
                <resourceModel>xcom_chronicle_resource</resourceModel>
            </xcom_chronicle>
            <xcom_chronicle_resource>
                <class>Xcom_Chronicle_Model_Resource</class>
                <entities>
                    <product_url_update>
                        <table>xcom_chronicle_product_url_update</table>
                    </product_url_update>
                </entities>
            </xcom_chronicle_resource>
        </models>
        <resources>
            <xcom_chronicle_setup>
                <setup>
                    <module>Xcom_Chronicle</module>
                </setup>
            </xcom_chronicle_setup>
        </resources>
        <helpers>
            <xcom_chronicle>
                <class>Xcom_Chronicle_Helper</class>
            </xcom_chronicle>
        </helpers>
        <events>
            <!-- Config events -->
            <core_config_data_save_commit_after>
                <observers>
                    <mass_offer_update>
                        <class>xcom_chronicle/observer</class>
                        <method>coreConfigAfterCommit</method>
                    </mass_offer_update>
                </observers>
            </core_config_data_save_commit_after>
            <!-- Order Events -->
            <checkout_submit_all_after>
                <observers>
                    <order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderAfterCreate</method>
                    </order>
                    <xcom_chronicle_inventory>
                        <class>xcom_chronicle/observer</class>
                        <method>publishInventoryForQuoteEvent</method>
                    </xcom_chronicle_inventory>
                    <xcom_chronicle_customer>
                        <class>xcom_chronicle/observer</class>
                        <method>customerForGuestOrders</method>
                    </xcom_chronicle_customer>
                </observers>
            </checkout_submit_all_after>
            <sales_order_save_before>
                <observers>
                    <order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderBeforeSave</method>
                    </order>
                </observers>
            </sales_order_save_before>
            <sales_order_save_after>
                <observers>
                    <order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderAfterSave</method>
                    </order>
                </observers>
            </sales_order_save_after>
            <sales_order_address_save_commit_after>
                <observers>
                    <order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderAddressAfterSave</method>
                    </order>
                </observers>
            </sales_order_address_save_commit_after>
            <order_cancel_after>
                <observers>
                    <order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderAfterCancel</method>
                    </order>
                </observers>
            </order_cancel_after>
            <sales_order_shipment_save_after>
                <observers>
                    <order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderAfterShip</method>
                    </order>
                    <update_order>
                        <class>xcom_chronicle/observer</class>
                        <method>orderUpdateAfterShip</method>
                    </update_order>
                </observers>
            </sales_order_shipment_save_after>
            <!-- Inventory events -->
            <cataloginventory_stock_item_save_after>
                <observers>
                    <xcom_chronicle_inventory>
                        <class>xcom_chronicle/observer</class>
                        <method>inventoryAfterSave</method>
                    </xcom_chronicle_inventory>
                </observers>
            </cataloginventory_stock_item_save_after>
            <sales_order_item_cancel>
                <observers>
                    <xcom_chronicle_inventory>
                        <class>xcom_chronicle/observer</class>
                        <method>inventoryAfterOrderItemCancel</method>
                    </xcom_chronicle_inventory>
                </observers>
            </sales_order_item_cancel>

            <!-- Product Events -->
            <catalog_product_save_before>
                <observers>
                    <customer>
                        <class>xcom_chronicle/observer</class>
                        <method>productBeforeSave</method>
                    </customer>
                </observers>
            </catalog_product_save_before>
            <catalog_product_save_after>
                <observers>
                    <customer>
                        <class>xcom_chronicle/observer</class>
                        <method>productAfterSave</method>
                    </customer>
                </observers>
            </catalog_product_save_after>
            <after_reindex_process_catalog_url>
                <observers>
                    <url_update>
                        <class>xcom_chronicle/observer</class>
                        <method>afterReindexCatalogUrl</method>
                    </url_update>
                </observers>
            </after_reindex_process_catalog_url>
            <end_process_event_catalog_product_save>
                <observers>
                    <url_update>
                        <class>xcom_chronicle/observer</class>
                        <method>afterCatalogProductSaveEvent</method>
                    </url_update>
                </observers>
            </end_process_event_catalog_product_save>
            <catalog_product_delete_before>
                <observers>
                    <customer>
                        <class>xcom_chronicle/observer</class>
                        <method>productBeforeDelete</method>
                    </customer>
                </observers>
            </catalog_product_delete_before>
            <catalog_product_delete_after>
                <observers>
                    <customer>
                        <class>xcom_chronicle/observer</class>
                        <method>productAfterDelete</method>
                    </customer>
                </observers>
            </catalog_product_delete_after>
            <!-- Customer Events -->
            <customer_save_before>
                <observers>
                    <customer>
                        <class>xcom_chronicle/observer</class>
                        <method>customerBeforeSave</method>
                    </customer>
                </observers>
            </customer_save_before>
            <customer_save_after>
                <observers>
                    <customer>
                        <class>xcom_chronicle/observer</class>
                        <method>customerAfterSave</method>
                    </customer>
                </observers>
            </customer_save_after>
            <sales_order_creditmemo_save_after>
                <observers>
                    <creditmemo_save_after>
                        <class>xcom_chronicle/observer</class>
                        <method>creditmemoSaveAfter</method>
                    </creditmemo_save_after>
                </observers>
            </sales_order_creditmemo_save_after>
            <core_abstract_save_after>
                <observers>
                    <rma_save_after>
                        <class>xcom_chronicle/observer</class>
                        <method>rmaSaveAfter</method>
                    </rma_save_after>
                </observers>
            </core_abstract_save_after>
        </events>
    </global>
    <default>
        <xcom>
            <topics>
                <outbound>
                    <ordermanagement>
                        <order_created>
                            <name>order/created</name>
                            <message>xcom_chronicle/message_order_created_outbound</message>
                        </order_created>
                        <order_cancelled>
                            <name>com.x.ordermanagement.v2/ProcessSalesChannelOrder/OrderCancelled</name>
                            <message>xcom_chronicle/message_order_cancelled_outbound</message>
                        </order_cancelled>
                        <xcom_marketplace_order_cancelled>
                            <name>com.x.ordermanagement.v2/ProcessSalesChannelOrder.MarketplaceOrder/MarketplaceOrderCancelled</name>
                            <message>xcom_chronicle/message_marketplace_order_cancelled_outbound</message>
                        </xcom_marketplace_order_cancelled>
                        <order_saleschannel_shipped>
                            <name>com.x.ordermanagement.v2/ProcessSalesChannelOrder/OrderShipped</name>
                            <message>xcom_chronicle/message_order_shipped_outbound</message>
                        </order_saleschannel_shipped>
                        <order_marketplace_shipped>
                            <name>com.x.ordermanagement.v2/ProcessSalesChannelOrder.MarketplaceOrder/MarketplaceOrderShipped</name>
                            <message>xcom_chronicle/message_order_marketplaceshipped_outbound</message>
                        </order_marketplace_shipped>
                        <order_nonsensitive_search_success>
                            <name>com.x.ordermanagement.v2/OrderSearch.NonSensitive/SearchNonSensitiveOrderSucceeded</name>
                            <message>xcom_chronicle/message_order_nonsensitive_search_success</message>
                        </order_nonsensitive_search_success>
                        <order_nonsensitive_search_fail>
                            <name>com.x.ordermanagement.v2/OrderSearch.NonSensitive/SearchOrderFailed</name>
                            <message>xcom_chronicle/message_order_nonsensitive_search_fail</message>
                        </order_nonsensitive_search_fail>
                        <order_return>
                            <name>com.x.ordermanagement.v2/ProcessSalesChannelOrder/OrderReturn</name>
                            <message>xcom_chronicle/message_order_return_outbound</message>
                        </order_return>
                        <partial_order_return>
                            <name>com.x.ordermanagement.v2/ProcessSalesChannelOrder/PartialOrderReturn</name>
                            <message>xcom_chronicle/message_order_return_partial_outbound</message>
                        </partial_order_return>
                    </ordermanagement>
                    <productmanagement>
                        <pim_product_created>
                            <name>com.x.pim.v1/ProductCreation/ProductCreated</name>
                            <message>xcom_chronicle/message_product_created_outbound</message>
                        </pim_product_created>
                        <pim_product_updated>
                            <name>com.x.pim.v1/ProductUpdate/ProductUpdated</name>
                            <message>xcom_chronicle/message_product_updated_outbound</message>
                        </pim_product_updated>
                        <pim_product_deleted>
                            <name>com.x.pim.v1/ProductDeletion/ProductDeleted</name>
                            <message>xcom_chronicle/message_product_deleted_outbound</message>
                        </pim_product_deleted>
                        <pim_product_search_success>
                            <name>com.x.pim.v1/ProductSearch/SearchProductSucceeded</name>
                            <message>xcom_chronicle/message_product_search_success</message>
                        </pim_product_search_success>
                        <pim_product_search_fail>
                            <name>com.x.pim.v1/ProductSearch/SearchProductFailed</name>
                            <message>xcom_chronicle/message_product_search_fail</message>
                        </pim_product_search_fail>
                        <pim_product_get_success>
                            <name>com.x.pim.v1/ProductLookup/LookupProductSucceeded</name>
                            <message>xcom_chronicle/message_product_get_success</message>
                        </pim_product_get_success>
                        <pim_product_get_fail>
                            <name>com.x.pim.v1/ProductLookup/LookupProductFailed</name>
                            <message>xcom_chronicle/message_product_get_fail</message>
                        </pim_product_get_fail>
                    </productmanagement>
                    <customermanagement>
                        <customer_created>
                            <name>customer/created</name>
                            <message>xcom_chronicle/message_customer_created_outbound</message>
                        </customer_created>
                        <customer_created_guest>
                            <name>customer/created/guest</name>
                            <message>xcom_chronicle/message_customer_created_guest_outbound</message>
                        </customer_created_guest>
                        <customer_updated>
                            <name>customer/updated</name>
                            <message>xcom_chronicle/message_customer_updated_outbound</message>
                        </customer_updated>
                        <customer_updated_guest>
                            <name>customer/updated/guest</name>
                            <message>xcom_chronicle/message_customer_updated_guest_outbound</message>
                        </customer_updated_guest>
                        <customer_search_success>
                            <name>com.x.customer.v1/CustomerSearch/SearchCustomerSucceeded</name>
                            <message>xcom_chronicle/message_customer_search_success</message>
                        </customer_search_success>
                        <customer_search_fail>
                            <name>com.x.customer.v1/CustomerSearch/SearchCustomerFailed</name>
                            <message>xcom_chronicle/message_customer_search_fail</message>
                        </customer_search_fail>
                        <customer_search_email_success>
                            <name>com.x.customer.v1/CustomerSearch.Email/SearchEmailCustomerSucceeded</name>
                            <message>xcom_chronicle/message_customer_search_email_success</message>
                        </customer_search_email_success>
                        <customer_search_email_fail>
                            <name>com.x.customer.v1/CustomerSearch.Email/SearchCustomerFailed</name>
                            <message>xcom_chronicle/message_customer_search_email_fail</message>
                        </customer_search_email_fail>
                        <customer_get_success>
                            <name>com.x.customer.v1/CustomerLookup/LookupCustomerSucceeded</name>
                            <message>xcom_chronicle/message_customer_get_success</message>
                        </customer_get_success>
                        <customer_get_fail>
                            <name>com.x.customer.v1/CustomerLookup/LookupCustomerFailed</name>
                            <message>xcom_chronicle/message_customer_get_fail</message>
                        </customer_get_fail>
                    </customermanagement>
                </outbound>
                <inbound>
                    <ordermanagement>
                        <order_nonsensitive_search>
                            <name>com.x.ordermanagement.v2/OrderSearch.NonSensitive/SearchOrder</name>
                            <message>xcom_chronicle/message_order_nonsensitive_search_inbound</message>
                        </order_nonsensitive_search>
                    </ordermanagement>
                    <productmanagement>
                        <pim_product_search>
                            <name>com.x.pim.v1/ProductSearch/SearchProduct</name>
                            <message>xcom_chronicle/message_product_search_inbound</message>
                        </pim_product_search>
                        <pim_product_get>
                            <name>com.x.pim.v1/ProductLookup/LookupProduct</name>
                            <message>xcom_chronicle/message_product_get_inbound</message>
                        </pim_product_get>
                    </productmanagement>
                    <customermanagement>
                        <customer_search>
                            <name>com.x.customer.v1/CustomerSearch/SearchCustomer</name>
                            <message>xcom_chronicle/message_customer_search_inbound</message>
                        </customer_search>
                        <customer_search_email>
                            <name>com.x.customer.v1/CustomerSearch.Email/SearchCustomer</name>
                            <message>xcom_chronicle/message_customer_search_email_inbound</message>
                        </customer_search_email>
                        <customer_get>
                            <name>com.x.customer.v1/CustomerLookup/LookupCustomer</name>
                            <message>xcom_chronicle/message_customer_get_inbound</message>
                        </customer_get>
                    </customermanagement>
                </inbound>
                <inventory>
                    <inventory_stock_item_outofstock>
                        <name>com.x.inventory.v1/StockItemUpdate/OutOfStock</name>
                        <message>xcom_chronicle/message_inventory_stock_outofstock_outbound</message>
                    </inventory_stock_item_outofstock>
                    <inventory_stock_item_updated>
                        <name>com.x.inventory.v1/StockItemUpdate/StockItemUpdated</name>
                        <message>xcom_chronicle/message_inventory_stock_updated_outbound</message>
                    </inventory_stock_item_updated>
                    <inventory_stock_item_get>
                        <name>com.x.inventory.v1/StockItemLookup/LookupStockItem</name>
                        <message>xcom_chronicle/message_inventory_stock_get_inbound</message>
                    </inventory_stock_item_get>
                    <inventory_stock_item_get_success>
                        <name>com.x.inventory.v1/StockItemLookup/LookupStockItemSucceeded</name>
                        <message>xcom_chronicle/message_inventory_stock_get_success</message>
                    </inventory_stock_item_get_success>
                    <inventory_stock_item_get_fail>
                        <name>com.x.inventory.v1/StockItemLookup/LookupStockItemFailed</name>
                        <message>xcom_chronicle/message_inventory_stock_get_fail</message>
                    </inventory_stock_item_get_fail>
                </inventory>
                <webstore>
                    <webstore_offer_created>
                        <name>com.x.webstore.v1/WebStoreOfferCreation/WebStoreOfferCreated</name>
                        <message>xcom_chronicle/message_webstore_offer_created_outbound</message>
                    </webstore_offer_created>
                    <webstore_offer_deleted>
                        <name>com.x.webstore.v1/WebStoreOfferDeletion/WebStoreOfferDeleted</name>
                        <message>xcom_chronicle/message_webstore_offer_deleted_outbound</message>
                    </webstore_offer_deleted>
                    <webstore_offer_updated>
                        <name>com.x.webstore.v1/WebStoreOfferUpdate/WebStoreOfferUpdated</name>
                        <message>xcom_chronicle/message_webstore_offer_updated_outbound</message>
                    </webstore_offer_updated>
                    <webstore_get>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllWebStore</name>
                        <message>xcom_chronicle/message_webstore_get_inbound</message>
                    </webstore_get>
                    <webstore_get_success>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllWebStoreSucceeded</name>
                        <message>xcom_chronicle/message_webstore_get_success</message>
                    </webstore_get_success>
                    <webstore_get_fail>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllWebStoreFailed</name>
                        <message>xcom_chronicle/message_webstore_get_fail</message>
                    </webstore_get_fail>
                    <webstore_category_getall>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllCategory</name>
                        <message>xcom_chronicle/message_webstore_category_getall_inbound</message>
                    </webstore_category_getall>
                    <webstore_category_getall_success>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllCategorySucceeded</name>
                        <message>xcom_chronicle/message_webstore_category_getall_success</message>
                    </webstore_category_getall_success>
                    <webstore_category_getall_fail>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllCategoryFailed</name>
                        <message>xcom_chronicle/message_webstore_category_getall_fail</message>
                    </webstore_category_getall_fail>
                    <webstore_offer_priceupdated>
                        <name>com.x.webstore.v1/WebStoreOfferUpdate/WebStoreOfferPriceUpdated</name>
                        <message>xcom_chronicle/message_webstore_offer_priceupdated_outbound</message>
                    </webstore_offer_priceupdated>
                    <webstore_offer_quantityupdated>
                        <name>com.x.webstore.v1/WebStoreOfferUpdate/WebStoreOfferQuantityUpdated</name>
                        <message>xcom_chronicle/message_webstore_offer_quantityupdated_outbound</message>
                    </webstore_offer_quantityupdated>
                    <webstore_get_provider>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllWebStoreProvider</name>
                        <message>xcom_chronicle/message_webstore_provider_get_inbound</message>
                    </webstore_get_provider>
                    <webstore_get_provider_success>
                        <name>com.x.webstore.v1/WebStoreMetadataProvision/GetAllWebStoreProviderSucceeded</name>
                        <message>xcom_chronicle/message_webstore_provider_get_success</message>
                    </webstore_get_provider_success>
                    <webstore_offer_search>
                        <name>com.x.webstore.v1/WebStoreOfferSearch/SearchWebStoreOffer</name>
                        <message>xcom_chronicle/message_webstore_offer_search_inbound</message>
                    </webstore_offer_search>
                    <webstore_offer_search_success>
                        <name>com.x.webstore.v1/WebStoreOfferSearch/SearchWebStoreOfferSucceeded</name>
                        <message>xcom_chronicle/message_webstore_offer_search_success</message>
                    </webstore_offer_search_success>
                    <webstore_offer_search_fail>
                        <name>com.x.webstore.v1/WebStoreOfferSearch/SearchWebStoreOfferFailed</name>
                        <message>xcom_chronicle/message_webstore_offer_search_fail</message>
                    </webstore_offer_search_fail>
                </webstore>
            </topics>
        </xcom>

        <crontab>
            <jobs>
                <mass_offer_update>
                    <!-- Scheduled inside Xcom_Chronicle_Model_Observer::massOfferUpdateJobSetup() -->
                    <run>
                        <model>xcom_chronicle/observer::massOfferUpdateCronJob</model>
                    </run>
                </mass_offer_update>
            </jobs>
        </crontab>
    </default>
</config>
